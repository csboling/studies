\section{Abelian Groups}

\subsection{Direct Product}
\begin{defn}[Direct Product]
Let $I$ be a set, and $\forall i \in I$ let $G_i$ be a group. Then we
have the \emph{direct product} $\prod_{i \in I} G_i$ as a set is the
set of all families $(g_i)_{i \in I}$ with $g_i \in G_i$. The group
operation is given by
$$
(g_i)_{i \in I} \cdot (g_i^\prime)_{i \in I}
= (g_i \cdot g_i^\prime)_{i \in I}.
$$
\end{defn}
This group is equipped with homomorphisms
$$
\mathrm{pr}_j : \prod_{i \in I} G_i \to G_j,
$$
the \emph{projection on the $j$ component} given by
$$
(g_i)_{i \in I} \mapsto g_j.
$$

\begin{prop}
$\prod_{i \in I} G_i$ satisfies the following \emph{universal
  property}: given a group $H$ and a family of group homomorphisms
$\varphi_i : H \to G_i$, $\forall i \in I$, there is a unique
homomorphism $\varphi : H \to \prod_{i \in I} G_i$ such that
$\varphi_i = \mathrm{pr}_i \circ \varphi$. This may be written

$$
\begindc{\commdiag}[500]
\obj(0,1)[h]{$H$}
\obj(2,1)[p]{$\prod_{i \in I} G_i$}
\obj(2,0)[g]{$G_i$}
\mor{h}{p}{$\varphi$}[\atright, \dashArrow]
\mor{p}{g}{$\mathrm{pr}_i$}
\mor{h}{g}{$\varphi_i$}
\enddc
$$
\end{prop}
\begin{proof}
Define
$$
\varphi(h) = (\varphi_i(h))_{i \in I} \in \prod_{i \in I} G_i.
$$
\end{proof}

For abelian groups recall that we denote the operation by $+$ and the
identity by $0_i$.

\begin{defn}[Direct Sum]
Let $G_i$ be a family of abelian groups. The \emph{direct sum}
$\oplus_{i \in I} G_i$ is the subgroup of the direct product consisting
of families $(g_i)_{i \in I}$ such that for all but a finite number of
indices $i \in I$, $g_i = 0_i$.
\end{defn}

\begin{xmpl}
Let $I = \{ 1, 2, \dots \}$. Let $G_i = \mathrm{Z}$ for all $i$. Then
we have
$$
\prod_{i \in \mathbb{Z_+}} \mathbb{Z}
  = \{(n_1, n_2, \dots) \mid n_i \in \mathbb{Z}\}
$$
while
$$
\bigoplus_{i \in \mathbb{Z_+}} \mathbb{Z}
  = \{(n_1, n_2, \dots, n_j, 0, 0, \dots ) \mid n_i \in \mathbb{Z}\}.
$$
\end{xmpl}

The direct sum $\oplus_{i \in I} G_i$ is equipped with homomorphisms
$\mathrm{inj}_i : G_i \to \oplus_{i \in I} G_i$ given by
$\mathrm{inj}_i(g_i) = (\dots, 0, g_i, 0, \dots)$.

\begin{prop}[Universal property of the direct sum]
Suppose $G$ is an abelian group and
$f_i : G_i \to G$ is a group homomorphism for each $i \in I$. Then
there is a group homomorphism $f : \oplus_{i \in I} G_i \to G$ such
that $\forall i \in I$,
$$
f( (\dots, 0, g_i, 0, \dots) ) = f_i(g_i).
$$
i.e. $f \circ \mathrm{inj}_i = f_i$. $f$ is uniquely determined by
this property.
\end{prop}

This property can also be expressed by the diagram
$$
\begindc{\commdiag}[500]
\obj(0,1)[h]{$H$}
\obj(2,1)[p]{$\bigoplus_{i \in I} G_i$}
\obj(2,0)[g]{$G_i$}
\mor{p}{h}{$\varphi$}[\atright, \dashArrow]
\mor{g}{p}{$\mathrm{inj}_i$}
\mor{g}{h}{$\varphi_i$}
\enddc
$$

\begin{xmpl}
Given $f_1 : G_1 \to G$ and $f_2 : G_2 \to G$ we have
$f: G_1 \oplus G_2 \to G$ given by
$f((g_1, g_2)) = f_1(g_1) + f_2(g_2)$. This is only a group
homomorphism for abelian $G$ since we require
\begin{align*}
  f((g_1, g_2)(h_1, h_2))
&= f((g_1 h_1, g_2 h_2))
 = f_1(g_1 h_1) + f_2(g_2 h_2) \\
&= f_1(g_1) + f_1(h_1) + f_2(g_2) + f_2(h_2) \\
&= f_1(g_1) + f_2(g_2) + f_1(h_1) + f_2(h_2) \\
&= f((g_1, g_2)) + f((h_1, h_2)).
\end{align*}
More generally
$$
f((g_i)_{i \in I}) = \sum_{i \in I} f_i(g_i).
$$
The reason this is well-defined is since $g_i = 0_i$ and therefore
$f_i(g_i) = 0$ for all but a finite number of $g_i$. This cannot be
defined on the direct product unless $I$ is a finite set, in which
case there is no distinction between the direct sum and the direct
product. The reason this is unique is that
$$
(g_1, g_2) = (g_1, 0) + (0, g_2)
$$
so that
$$
f((g_1, g_2)) = f((g_1, 0)) + f((0, g_2)) = f_1(g_1) + f_2(g_2).
$$
\end{xmpl}

\subsection{Free abelian groups}
Consider the direct sum
$$
\bigoplus_{i \in I} \mathbb{Z} \triangleq \mathbb{Z}[I]
$$
where $I$ is any set.

\begin{defn}[Free Abelian Group]
An abelian group $A$ is called \emph{free} if there is a set $I$ such
that
$$
A \simeq \mathbb{Z}[I].
$$
\end{defn}

\begin{defn}[Equivalent]
An abelian group $A$ is free if there is a subset (called a \emph{basis})
$\{ e_i \}_{i \in I}$ of $A$ such that every element $a \in A$ can be
written \emph{uniquely} as a linear combination
$$
a = \sum_{i \in I} n_i e_i,
$$
where $n_i \in \mathbb{Z}$ and all but a finite number of $n_i$ are 0.
Here $n_i e_i$ denotes $n_i$-fold group
operations of $e_i$ on itself.

This is equivalent to the above definition. Observe that
$\mathbb{Z}[I]$ has a ``canonical'' basis given by
$e_i = \mathrm{inj}_i(1)$ that giving a basis of $A$ is
equivalent to giving an isomorphism
$\varphi : \mathbb{Z}[I] \xrightarrow{\sim} A$ given by
$$
\{\varphi(e_i)\}_{i \in I}.
$$
That is, given $\{ a_i \}_{i \in I}$ a basis of $A$, define
$\varphi : \mathbb{Z}[I] \to A$ by
$$
\varphi((n_i)) = \sum_{i \in I} n_i a_i.
$$
\end{defn}
That is, an element of $A$ is a linear combination of basis vectors,
and the isomorphism is given by looking at the $I$-indexed components
of an element $a \in A$.

\begin{prop}[Universal Property of Free Abelian Groups]
Let $I$ be a set and let
$\mathbb{Z}[I] = \oplus_{i \in I} \mathbb{Z}$.
Suppose we are given an abelian group $A$ and a set map
$f : I \to A$. There is a unique group homomorphism
$\tilde{f} : \mathbb{Z}[I] \to A$ such that
$\tilde{f}(e_i) = f(i)$, $\forall i$.
\end{prop}

\begin{proof}
Define
$$
\tilde{f}\left(\sum_{i \in I} n_i e_i\right)
= \sum_{i \in I} n_i f(i).
$$
\end{proof}

First we require the following:
\begin{lemma}
Let $f : A \to A^\prime$ be a group homomorphism of abelian
groups. Suppose $f$ is surjective and $A^\prime$ is free. Then there
is a group homomorphism $g : A^\prime \to A$ such that
$f \circ g = \mathrm{id}_{A^\prime}$.
\end{lemma}
\begin{proof}
Since $A^\prime$ is free it has a basis $\{ a_i^\prime \}_{i \in
  I}$. Since $f$ is surjective, we have $a_i^\prime = f(a_i)$ for some
$a_i \in A$. Consider $g : A^\prime \to A$ given by
$$
g\left(\sum_{i \in I} n_i a_i^\prime\right) = \sum_{i \in I} n_i a_i.
$$
Then
$$
(f \circ g)\left(\sum_{i \in I} n_i a_i^\prime\right)
= f\left(\sum_{i \in I} n_i a_i\right)
= \sum_{i \in I} n_i f(a_i)
= \sum_{i \in I} n_i a_i^\prime.
$$
since $f$ is a homomorphism. Check that $g$ is a homomorphism also.

We can think of this as analogous to producing a map
$\mathbb{R} \to \mathbb{R}^2$ from a surjective map in the opposite
direction -- the map we produce corresponds to projection of a line
$L \in \mathbb{R}^2$ onto a non-parallel line.
\end{proof}

\begin{lemma}
Let $A$ be an abelian group with two subgroups $B$ and $C$
such that $B \cap C = \{ 0 \}$ and $A = B + C$, i.e.
$\forall a \in A$ there exist $b \in B$ and $c \in C$ such that
$a = b + c$. Then the map $B \times C \to A$ given by
$(b, c) \mapsto b + c$ is a group isomorphism, so
$A \simeq B \times C = B \oplus C$.
\end{lemma}

\begin{proof}
Since $A$ is abelian, $(b, c) \mapsto b + c$ is a group
homomorphism. The condition $A = B + C$ implies it is surjective and
the condition $B \cap C = \{ 0 \}$ implies it is injective, since
the kernel is
\begin{align*}
 & \{ (b, c)  \mid b + c = 0 \} \\
=& \{ (b, -b) \mid b \in B, b \in C \}
=& \{ (0, 0) \}
\end{align*}
since $B \cap C = \{ 0 \}$. In this situation we say $A$ is the
\emph{direct sum} of its subgroups and write $A = B \oplus C$
(as abuse of notation, since this is in fact an isomorphism).
\end{proof}

More generally we have the following:
\begin{lemma}
Let $A$ be an abelian group and let $B_i$, $i \in I$ be a family of
subgroups of $A$ such that every element of $a \in A$ can be written
as a sum
$$
a = \sum_{i \in I} b_i
$$
in a unique way, with a finite number of $b_i$ nonzero.
(This condition implies that for a given $B_i$ its intersection with
 the sum of all other $B_j$ is trivial).
Then the map
$$
\bigoplus_{i \in I} B_i \to A
$$
given by
$$
(b_i)_{i \in I} \mapsto \sum_{i \in I} b_i
$$
is a group isomorphism, and in this case we write
$$
A = \bigoplus_{i \in I} B_i.
$$
\end{lemma}

\begin{lemma}
Let $f : A \to A^\prime$ be a surjective homomorphism, where
$A^\prime$ is free. Then
$$
A = \ker f \oplus C,
$$
where $C$ is a subgroup of $A$ such that the restriction
$f|_C : C \to A^\prime$ is an isomorphism. Indeed we shall see
that $C = \mathrm{Im}(g)$, where $g$ is the right inverse of $f$.
\end{lemma}

\begin{proof}
Set $C = \mathrm{Im}(g) \subset A$. We observe that
\begin{enumerate}
  \item{$\mathrm{Im}(g) \cap \ker(f) = \{ 0 \}$.
        Let $x = g(y)$ and $f(x) = 0$ for some $x$. Then
        $f(g(y)) = 0$, so since $f \circ g = \mathrm{id}$ this means
        $y = 0$, and therefore $x = 0$.
       }
  \item{$A = \mathrm{Im}(g) + \ker(f)$. Write
        $$
        x = (x - g(f(x)) + g(f(x)).
        $$
        Then $g(f(x)) \in \mathrm{Im}(g)$ and
        $$
        f(x - g(f(x))) = f(x) - f(g(f(x))) = f(x) - f(x) = 0
        $$
        so $x - g(f(x)) \in \ker(f)$.
       }
  \item{Take $C = \mathrm{Im}(g)$. The restriction $f|_c : C \to
        A^\prime$ is surjective since $\forall y \in A^\prime$,
        $g(y) \in C$ and $f(g(y)) = y$, and injective since
        $\ker (f|_C) = \ker(f) \cap C = \{ 0 \}$ as previously shown.
       }
\end{enumerate}
Therefore $A = \ker(f) \oplus \mathrm{Im}(g)$ and $\mathrm{Im}(g)
\simeq A^\prime$.
\end{proof}

\begin{theorem}
Suppose $A$ is a free abelian group. Let $B$ be a subgroup of $A$.
Then $B$ is also free.
\end{theorem}

\begin{proof}
The general case is similar to the finite argument.
For a more particular case, assume $A$ has a finite basis
$\{e_i\}_{i = 1}^n$.
This means $A \simeq \bigoplus_{i = 1}^n \mathbb{Z} = \mathbb{Z}^n$.

We have $B \subset \mathbb{Z}^n$. Prove $B$ is free by induction on
$n$.

\begin{enumerate}
  \item{
    Take $n = 1$. Then $B \subset \mathbb{Z}$, so $B$ is generated
    by the smallest positive integer $b_0 \in B$, so
    $B = \langle b_0 \rangle = \mathbb{Z} \cdot b_0$. Then
    $B \simeq \mathbb{Z}$ and so $B$ is free with $b_0$ as a
    basis, since we can write $b = q b_0 + r$, so
    $r = b - q b_0$, so $r \in B$ since $B$ is a subgroup. But
    $0 \leq r < b_0$, and $b_0$ is the smallest nonzero element in
    $B$ by assumption, so $r = 0$. Therefore $b = q b_0$ for some $q$.
  }
  \item{
    We next have
    $$
    B \subset \mathbb{Z}^n = \mathbb{Z} \cdot e_1
                           + \cdots
                           + \mathbb{Z} \cdot e_n.
    $$
    Consider the projection $\mathrm{pr}_1$ of $\mathbb{Z}^n$ to the
    first element and consider
    $f = \mathrm{pr}_1|_B : B \to \mathbb{Z}$. There are two
    possibilities:
    \begin{itemize}
      \item{
        $f = 0$. Then
        $$
        B \subset \mathbb{Z} \cdot e_2 + \cdots + \mathbb{Z} \cdot e_n
          =       \mathbb{Z}^{n-1}
        $$
        so $B$ is free by induction.
      }
      \item{
        Take $\{ 0 \} \neq \mathrm{Im}(f) \subset \mathbb{Z}$. Then as
        in the $n = 1$ case, $\mathrm{Im}(f) = \mathbb{Z} \cdot b_0$
        is free. Then $f : B \to \mathrm{Im}(f)$ is a surjective map
        onto a free group, so
        $B = \ker(f) \oplus C$ where $C \simeq \mathrm{Im}(f) \simeq
        \mathbb{Z}$, and then
        $B \simeq \ker(f) \oplus \mathbb{Z}$.

        Look at $\ker(f) \subset B$. Take $b \in \ker (f)$. Then
        $\mathrm{pr}_1|_B(b) = 0$ so $b \in \mathbb{Z}^{n-1}$, so by
        the induction hypothesis $\ker(f)$ is free. Therefore
        $B \simeq \ker(f) \oplus \mathbb{Z}$ is free.
      }
    \end{itemize}
  }
\end{enumerate}
This means also that $B$ has a basis with $\leq n$ elements.
\end{proof}

\begin{prop}
If $A$ is a free abelian group, then the cardinality of a basis of $A$
is independent of the choice of basis and is called the \emph{rank} of $A$.
\end{prop}
\begin{proof}
We first have that if $A \simeq \mathbb{Z}^n \simeq \mathbb{Z}^m$, then $n =
m$. Pick a prime $p$. Consider the subgroup $pA \subset A$. Then
\begin{align*}
A \simeq \mathbb{Z}^n \implies
A / pA & \simeq \mathbb{Z}^n / p \mathbb{Z}^n \\
       & = \frac{\mathbb{Z} \times \cdots \times \mathbb{Z}}
                {p \mathbb{Z} \times \cdots \times p \mathbb{Z} }
                \\
       & = \mathbb{Z} / p \mathbb{Z}
           \times \cdots
           \times \mathbb{Z} / p \mathbb{Z} \\
       & = \mathbb{Z}_p
           \times \cdots
           \times \mathbb{Z}_p \\
       & = \mathbb{Z}_p^n
\end{align*}
and similarly if $A \simeq \mathbb{Z}^m$ we have
$A / pA \simeq \mathbb{Z}_p^m$, so if
$\mathbb{Z}_p^m \simeq \mathbb{Z}_p^n$ we have
$|\mathbb{Z}_p^m| = |\mathbb{Z}_p^n|$ and thus
$p^n = p^m$, so $n = m$.
\end{proof}

\subsection{Finitely Generated Abelian Groups}
\begin{defn}[Some Abelian Groups]
We define some terminology for certain abelian groups.
An abelian group $A$ is called
\begin{itemize}
\item{
  \emph{torsion} when $\forall a \in A$,
  $\exists n \geq 1$ such that $n \cdot a = 0$,
  and such an element is called a torsion element.
}
\item{
  \emph{torsion free} when $n \cdot a = 0$ implies $a = 0$
  for $n \geq 1$
}
\item{
  \emph{finitely generated} when $A$ has a finite generating set, i.e.
  there exists a finite list of elements $a_i \in A$ such that
  $\forall a \in A$, we can write
  $a = m_1 a_1 + \cdots + m_n a_n$ for some $m_i \in \mathbb{Z}$.
  Equivalently, there is a surjective homomorphism $\mathbb{Z}^n \to
  A$ for some $n$.
}
\end{itemize}
\end{defn}

\begin{obsv}
If an abelian group $A$ is both torsion and finitely generated, then
it is finite. (The converse is clear from the definitions.)
\end{obsv}
\begin{proof}
If $A$ is finitely generated, we have generators $a_i \in A$, so that
for any $a \in A$ we have $a = \sum m_i a_i$.
Since $A$ is torsion we have $k_i$ such that $k_i a_i = 0$. Therefore
there are at most $k_1 \times \cdots \times k_n$ elements in $A$,
since each $m_i \in \mathbb{Z}_{n_i}$.

Alternatively, since $A$ is finitely generated there is a surjective
homomorphism $\mathbb{Z}^n \to A$. Since $A$ is torsion, there is an
$N$ such that $N \cdot a_i = 0$ $\forall i$, e.g. take
$N = k_1 k_2 \cdots k_n$. Therefore $N \cdot \mathbb{Z}^n$ maps to $0$
under $\mathbb{Z}^n \to A$. Therefore $\mathbb{Z}^n \to A$ factors
through $\mathbb{Z}^n \to \mathbb{Z}^n / N \mathbb{Z}^n \to A$, where
$\mathbb{Z}^n / N \mathbb{Z}^n$, so $A$ is the surjective image of a
finite group and therefore finite.
\end{proof}

\begin{obsv}
Any finite abelian group is finitely generated, since it is generated by all
its elements, and is torsion since every element has an order that
divides the order of the group (by Lagrange's theorem).
\end{obsv}

\begin{xmpl}
Take $\mathbb{Z} \subset \mathbb{Q}$ with $+$ and take the quotient
$A = \mathbb{Q} / \mathbb{Z}$. This is torsion but not finite, so not
finitely generated. $A$ is of the form
$$
A = \{ \frac{r}{s} + \mathbb{Z} \mid \frac{r}{s} \in \mathbb{Q} \},
$$
so for $\alpha \in A$ we have
$$
s \cdot \alpha = r + \mathbb{Z} = \mathbb{Z} = 0 + \mathbb{Z}.
$$
\end{xmpl}

\begin{exer}
Consider $A = \mathbb{Q}$ with addition. Show $A$ is torsion free, not
finitely generated, and not free.
\end{exer}

\begin{defn}
Let $A$ be an abelian group. Its torsion part (or \emph{torsion
  subgroup}) is
$$
A_{tor} = \{ a \in A \mid \exists n \geq 1 . n a = 0 \}.
$$
Its torsion free part (or \emph{cotorsion}) is
$A / A_{tor}$. This is torsion free:
$a + A_{tor}$ such that $n(a + A_{tor}) = 0 + A_{tor}$ implies $n
\cdot a \in A_{tor}$, so there exists an $m \geq 1$ such that
$m(na) = (mn)a = 0$ so $a \in A_{tor}$. Thus $a + A_{tor} = 0 +
A_{tor}$, so the only torsion element in $A / A_{tor}$ is
$0 + A_{tor}$.
\end{defn}

\begin{obsv}
Suppose $A$ is a finitely generated abelian group. Then
$A / A_{tor}$ is torsion free and finitely generated and therefore
free. Therefore $A / A_{tor} \simeq \mathbb{Z}^n$ since the basis for
$A / A_{tor}$ cannot be infinite. Therefore there is a surjective map
$f : A \to \mathbb{Z}^n$ so $A \simeq \ker(f) \oplus \mathbb{Z}^n$,
where $\ker(f) = A_{tor}$. Therefore
$$A \simeq A_{tor} \oplus \mathbb{Z}^n.$$

Now $A$ is finitely generated, so $A_{tor} \subset A$ is finitely
generated (exercise). Since $A_{tor}$ is also torsion, $A_{tor}$ is
finite. We conclude that every finitely generated abelian group $A$ is
isomorphic to the direct sum of a finite abelian group (the torsion part)
and $\mathbb{Z}^n$ for some $n \geq 1$. $n$ is called the rank of $A$.
\end{obsv}

\begin{theorem}
An abelian group $A$ that is finitely generated and torsion free is free.
\end{theorem}

\begin{proof}
Since $A$ is finitely generated. Then there exists a set $S \subset A$
that generates $A$. Consider a maximal subset
$\{ x_1, \dots, x_n \} \subset S$ of linearly independent elements,
i.e. if for some $m_i \in \mathbb{Z}$ we have $\sum_{i=1}^n m_i x_i =
0$, this implies $m_i = 0 \forall i$. Consider a single element
$x \in S \subset A$. Take $mx = 0$. Then since $A$ is torsion-free
this means $m = 0$.

Consider $x \in S$ such that $x \neq \{ x_1, \cdots, x_n \}$. Since
$\{x_1, \dots, x_n\}$ is maximal, there exists an $m \neq 0$ such that
$m x + m_1 x_1 + \cdots + m_n x_n = 0$. Consider the subgroup
$B = \langle x_1, \cdots, x_n \rangle \subset A$ generated by this
maximal set. We have just shown that given $x \in S$, there exists an
integer $m_x \geq 1$ such that
$m_x x = - m_1 x_1 - \cdots - m_n x_n$, since if $x \in B$ we can take
$m_x = 1$. Since $S$ is finite, there exists an
$N = \prod_{x \in S} m_x$ such that $N x \in B$, $\forall x \in
S$. Since $S$ generates $A$, this implies $NA \subset B$.

Observe:
\begin{enumerate}
  \item{
    $B$ is free since
    $$
    B = \mathbb{Z} x_1 + \cdots \mathbb{Z} x_n \simeq \mathbb{Z}^n.
    $$
    We have shown that a subgroup of a free group is free, so $N
    A$ is free as well.
  }
  \item{
    $NA$ is isomoprhic to $A$ because $A$ is torsion free. Consider
    the map $N : A \to A$ given by $a \mapsto N a$. This is injective
    because $a$ is torsion-free, so $A \simeq \mathrm{Im}(N) = N A$.
  }
\end{enumerate}
Therefore $A$ is free abelian.
\end{proof}

\begin{defn}
For $m \geq 1$, we write
$$
A[m] = \{ a \in A \mid m a = 0 \}
$$
to denote the \emph{$m$-torsion of $A$}.

For $p$ prime, we also write
$$
A[p^\infty] = \{ a \in A \mid \exists n \geq 1 . p^n a = 0 \}
$$
for the \emph{$p$-part} or \emph{$p$-power torsion} of $A$.
\end{defn}

\begin{lemma}
If $\mathrm{gcd}(r, s) = 1$, then
$$
A[rs] = A[r] + A[s] = A[r] \oplus A[s].
$$
\end{lemma}
\begin{proof}
$A[r] \subset A[rs]$, $A[s] \subset A[rs]$ are subgroups. Their
intersection is trivial, since if $r x = 0$ and $s x = 0$, we have
$1 = \mathrm{gcd}(r, s) = ru + sv$ and so
$$
x = (ru + sv)x = urx + vsx = 0.
$$

Furthermore $A[rs] = A[r] + A[s]$. Take
$x \in A[rs]$. Then since $1 = r u + s v$ we have
$x = u \cdot rx + v \cdot sx$. But $x \in A[rs]$ so
$s(rx) = 0$ and $r(sx) = 0$. We
then have $x \in A[s] + A[r]$.
\end{proof}

\begin{theorem}
If $A$ is a torsion abelian group then
$A = \bigoplus_{p \text{ prime}} A[p^\infty]$.
\end{theorem}
\begin{proof}
We know $A[p^\infty] < A$, $\forall p$. There is a homomorphism
$\oplus_p A[p^\infty] \to A$ given by
$$
(a_p)_p \mapsto \sum_p a_p,
$$
which is a finite sum by the definition of $A[p^\infty]$. This is an
isomorphism:
\begin{itemize}
\item{
  Note that to say $A$ is torsion means $A = \bigcup_{n \geq 1} A[n]$.
  Since $A$ is torsion, for each $x \in A$ there exists an $n \geq 1$
  such that $n x = 0$, so $x \in A[n]$. But
  $n = p_1^{k_1} \cdots p_r^{k_r}$ where $p_i$ are distinct primes,
  and so
  $$
  A[n] = A[p_1^{k_1}] \oplus \cdots \oplus A[p_r^{a_r}].
  $$
  Then $x = x_1 + \cdots + x_r$ where
  $x_i \in A[p_i^{k_i}] \subset A[p^\infty]$ so the homomorphism is surjective.
}
\item
{
  \begin{Problem}
    Show the homomorphism in question is injective.
  \end{Problem}
  \begin{Answer}
    Let $a, b \in \oplus_p A[p^\infty]$ so that
    $a \neq b$. We can write them as
    $a = (a_p)_p$ and $b = (b_p)_p$. Since $a \neq b$ it must be the
    case that $a_q \neq b_q$ for some prime $q$. There
    exists an $m_q$ such that $q^{m_q} a_q = 0$ and an $n_q$ such
    that $q^{n_q} b_q = 0$. Without loss of generality take $m_q \geq
    n_q$. This means $q^{m_q} a_q = q^{n_q} b_q$ so $b_q = q^{m_q -
      n_q} a_q$. Then
    $$
    f(b) = q^{m_q - n_q} a_q + \sum_{p \neq q} b_q
    $$
  \end{Answer}
}
\end{itemize}
\end{proof}

\begin{corol}
If $A$ is a finite abelian group of order $n = p_1^{a_1} \cdots
p_r^{a_r}$, where $p_i$ are distinct primes, then
$$
A = A[p_1^{a_1}] \oplus \cdots \oplus A[p_r^{a_r}].
$$
\end{corol}
\begin{proof}
Since $A$ is finite $A$ is torsion. From the previous theorem
$$
A = A[p_1^\infty] \oplus \cdots \oplus A[p_r^{\infty}]
$$
and by Lagrange's theorem $A[p_i^\infty] = A[p_i^{a_i}]$ since
$A[p_i^\infty]$ is a subgroup.
\end{proof}

\begin{exer}
Check that
$|A[p_i^\infty]| = |A[p_i^{a_i}]| = p_i^{a_i}$.
\end{exer}

We have thus written an arbitrary finite abelian group as a direct sum
of abelian $p$-groups.

\begin{theorem}
Every abelian $p$-group is isomorphic to a group of the form
$$
\mathbb{Z}_{p^{r_1}} \oplus \cdots \oplus \mathbb{Z}_{p^{r_n}}
$$
with $r_1 \geq \cdots \geq r_n \geq 1$ and with the sequence of
powers uniquely determined by the group. These powers $p^{r_i}$ are called the
\emph{elementary divisors} of the group.
\end{theorem}
\begin{proof}
Take $|A| = p^n$ and proceed by induction on $n$. For $n = 1$ the
group $A$ has prime order and is therefore isomorphic to
$\mathbb{Z}_p$.

Consider an element $a_1$ of $A$ with the highest order, so $|a_1| = p^{r_1}$. Then
$$
A_1 = \langle a_1 \rangle \simeq \mathbb{Z}_{p^{r_1}} \subset A
$$
Then $A / A_1$ is still a $p$-group with order less than $p^n$, so by
the induction hypothesis it is a product of cyclic groups.

\begin{lemma}
Suppose $\bar{b} \in A / A_1$ and has order $p^r$. Then there is some
element $a \in A$ with $a + A_1 = \bar{b}$ and order $|a| = p^r$. This
depends on the fact that $A_1 = \langle a_1 \rangle$ is generated by
an element of highest order.
\end{lemma}

\begin{proof}
Pick some $b \in A$ with $\bar{b} = b + A_1$. We have
$$
p^r \bar{b} = 0 \in A / A_1
$$
so $p^r b \in A_1 = \langle a_1 \rangle$. Then
$p^r b = n a_1 = p^k m a_1$. Observe that
$$
|m a_1| = |a_1| = p^{r_1}.
$$
If $p^r b = 0$ we are done, since then $|b| \leq p^r$ but
$|b| \geq |\bar{b}| = p^r$. (This is true in general since $b$ is a
homomorphic image of $\bar{b}$, and so if something kills $b$ it kills
$\bar{b}$.) Therefore $|b| = p^r$.

Otherwise $p^r b = p^k m a_1 \neq 0$. Observe that $p$ does not divide
$m$ and so $|m a_1| = |a_1| = p^{r_1}$, since $\mathrm{gcd}(m,
p^{r_1}) = 1$. This is because we can always write $1 = m u + p^a v$,
so multiplying by $m$ has the same effect as multiplying by 1.

Then $|p^k m a_1| = p^{r_1 - k}$
since $a_1$ is not zero. Indeed
$$
p^{r_1 - k}(p^k m a_1) = p^{r_1} m a_1 = m p^{r_1} a_1 = 0
$$
and if
$p^a (p^k m a_1) = 0$ then $p^{k + a} m a_1 = 0$ so $k + a \geq r_1$.
Since $|m a_1| = p^{r_1}$ then $a \geq r_1 - k$.

So $|p^r b| = |p^k m a_1| = p^{r_1 - k}$ and then
$|b| = p^{r + r_1 - k} = p^r p^{r_1 - k}$. But $p^{r_1}$ is the
largest order among all elements in $A$, so $r + r_1 - k \leq r_1$ and
then $r \leq k$. Therefore
$$
p^r b = p^k m a_1 = p^r (p^{k-r} m a_1) = p^r c
$$
and so $p^r b = p^r c$. Therefore $p^r (b - c) = 0$

Notice $c = p^{k-r} m a_1 \in A_1$, so $\bar{b - c} = \bar{b} \in A /
A_1$. Then $b - c = b^\prime$ is such that $b^\prime + A_1 = \bar{b}$
and $p^r b^\prime = 0$, so $|b^\prime| = p^r$.

The idea of this proof is to lift an element arbitrarily, then correct
it by some additive factor in order to construct an appropriate element.
\end{proof}

We have now that
$$
A / A_1 \simeq \bar{A}_2 \times \cdots \times \bar{A}_n,
$$
where $\bar{A}_i = \langle \bar{a_i} \rangle$ and
$|\bar{a_i}| = p^{\bar{r_i}}$. Our lemma tells us that we can find
 $a_2, \dots, a_n \in A$ with $a_i + A_1 = \bar{a}_i$ and
$|a_i| = |\bar{a}_i| = p^{\bar{r}_i}$. Set $r_i = \bar{r}_i$. Observe
$r_2 \geq r_3 \geq \cdots \geq r_n$ by induction and
$r_1 \geq r_2, \dots,  r_n$ since $a_1$ has the largest order
$p^{r_1}$.

We have
$$
A_i = \langle a_i \rangle \simeq \mathbb{Z}_p^{r_i} \subset A
$$
and
$$
r_1 \geq r_2 \geq \cdots \geq r_n \geq 1.
$$
It remains to check that
$$
A = A_1 \times A_2 \times \cdots \times A_n.
$$
It is enough to show that every $a \in A$ can be written uniquely as a
linear combination
$$
a = m_1 a_1 + \cdots + m_n a_n
$$
with $0 \leq m_i < p^{r_i}$.

First, any $a \in A$ can be written this way:
$$
\bar{a} = a + A_1 = A / A_1 = \bar{A}_2 \times \cdots \times \bar{A}_n
$$
so
$$
\bar{a} = m_2 \bar{a}_1 + \cdots + m_n \bar{a}_n
$$
which implies
$$
a - (m_2 a_2 + \cdots + m_n a_n) \in A_1 = \langle a_1 \rangle
$$
and therefore
$$
a - (m_2 a_2 + \cdots + m_n a_n) \in A_1 = m_1 a_1.
$$

For uniqueness it is enough to check linear independence, so assume
$$
m_1 a_1 + \cdots + m_n a_n = 0
$$
and then
$$
m_1 \bar{a}_1 + \cdots + m_n \bar{a}_n = \bar{0} \in A / A_1
$$
and since $m_1 \bar{a}_1 = \bar{0}$ this means $m_i = 0$ since
$A / A_1 = \prod_{i=2}^n \bar{A}_i$.

It remains to be shown that if
$$
A =
\mathbb{Z}_{p^{a_1}} \times \cdots \times \mathbb{Z}_{p^{a_n}}
\simeq
\mathbb{Z}_{p^{b_1}} \times \cdots \times \mathbb{Z}_{p^{b_m}}
= B
$$
for $a_1 \geq \cdots \geq a_n \geq 1$ and
$b_1 \geq \cdots \geq b_n \geq 1$ then $n = m$ and $a_i = b_i$.
Both groups must have the same order $p^{\sum a_i} = p^{\sum
  b_i}$. Proceed by induction on this exponent, where the base case is
trivial.

Take $p A = \{ p a \mid a \in A \} < A$ and $p B < B$. Observe that
$$
p \mathbb{Z}_{p^r} \simeq \mathbb{Z}_{p^{r-1}}, \forall r \geq 1.
$$
Then
$$
p A \simeq \mathbb{Z}_{p^{a_1 - 1}}
           \times \cdots \times
           \mathbb{Z}_{p^{a_n - 1}}
$$
and
$$
pB \simeq \simeq \mathbb{Z}_{p^{b_1 - 1}}
           \times \cdots \times
           \mathbb{Z}_{p^{b_m - 1}}.
$$
But $p^{x - 1}$ can be 1. Notice that
$$
p (\mathbb{Z}_{p^2} \times \mathbb{Z}_p) \simeq \mathbb{Z}_p
$$
and $p \mathbb{Z}_{p^2} \simeq \mathbb{Z}_p$. But we have by
assumption that the exponents should match, and since
$\mathbb{Z}_{p^2} \times \mathbb{Z}_p$ has a different order from
$\mathbb{Z}_{p^2}$ we can rule this kind of case out.
\end{proof}

\begin{corol}
Every finite abelian group is isomorphic to the direct sum of cyclic groups.
\end{corol}
\begin{proof}
We can write
\begin{align*}
A &= A[p_1^\infty] \oplus \cdots \oplus A[p_n^\infty] \\
  &=      \mathbb{Z}_{p_1^{r_{11}}} \oplus \cdots \oplus \mathbb{Z}_{p_1^{r_{1k}}} \\
  &\oplus \cdots \\
  &\oplus \mathbb{Z}_{p_n^{r_{n1}}} \oplus \cdots \oplus \mathbb{Z}_{p_n^{r_{nk}}}.
\end{align*}
\end{proof}